
#Instructions
Ελευθέριος Αργύριος Καραμπάς 	ΑΜ: 1115201400064

Στο συγκεκριμένο project έχουν υλοποιηθεί όλα τα κομματιά του μαζί και το μπόνους. Παρακάτω υπάρχει αναλυτική περιγραφή για το
πως να τρέξετε τα παραδείγμα και τις παραδοχές που έκανα και ακολούθησα.

## To compile and run
-Script:
   Έχω δημιουργήσει ένα script το οποίο δέχεται ένα όρισμα ως παράμετρο το αρχείο που θέλουμε να κάνουμε compile καθώς και 
   προαιρετικά 4 flags. Το ένα είναι το -i για τον ενδιάμεσο κώδικα, το -n για την μη βελτιστοποίηση, το -s για τον τελικό κώδικα
   καθώς και το -o ακολουθούμενο απο ένα όνομα για το εκτελέσιμο που θα παραχθεί.

   Το script αυτό συγκεκριμένα φτιάχνει τον compiler της grace αν δεν υπάρχει ήδη και κάνει compile το αρχείο που θα του δωσουμε.
   Η εντολή για να το τρέξουμε είναι: 
			./grace.sh [-i] [-n] [-ο <executable_file>] [-s] <grace_file> 
   με όποια σειρά θέλετε δίνετε τα ορίσματα εκτός απο το -o που πρέπει να ακολουθείται απο ένα όνομα που θα είναι του εκτελέσιμου. 

   Αν όλα πάνε καλά δημιουργείται το εκτελέσιμο αρχείο <executable_file>, ως default είναι το a.out. Σε περίπτωση που δοθεί στον 
   μεταγλωττιστή ως όρισμα το -s τότε δημιουργείται ένα επιλέον αρχείο file.s που περίεχει τον τελικό κώδικα σε assembly x86.

  Αν δοθεί στον μεταγλωττιστή ως παράμετρος το -i δημιουργείται ακόμη ένα αρχείο Quad που περιέχει ανά συνάρτηση τον ενδιάμεσο κώδικα. 
  Υπάρχει ένα label #<name><nesting> ανά συνάρτηση για να ξεχωρίζουμε ποιανής συνάρτησης είναι ο ενδιάμεσος κώδικας και το φώλιασμα αυτής, 
  σε περίπτωση που έχουμε πολλές συναρτήσεις με το ίδιο όνομα. 

-Makefile:
   Έχώ φτιάξει ακόμη ένα Makefile το οποίο με την εντολή make δημιουργεί τον μεταγλωττιστή και με την εντολή make clean διαγράφει
   τον μεταγλωττιστή μαζί με τα αρχεία που μπορεί να έχουν παραχθεί κατα την μεταγλώττιση αρχείων.


#Details
Έχω δημιουργήσει έναν Visitor με τον οποίο διαπερνώ το AST, κάνω τη σημασιολογική ανάλυση και ταυτόχρονα παράγω ενδιάμεσο κώδικα.
Στη συνέχεια αν έχει δοθεί ως όρισμα το -n στον μεταγλωττιστή, δεν κάνει βελτιστοποίηση και παράγει κατευθείαν τον τελικό κώδικα,
αλλιώς παράγει μετά την βελτιστοποίηση των τετράδων, τελικό κώδικα.


#Code explanation
Επειδή ο κώδικας δεν περιέχει και αρκετά σχόλια, θα αναλύσω παρακάτω την λειτουργικότητα κάθε κλασής που έχω δημιουργήσει:

1.DataType: την χρησιμοποιώ για να γυρνάω πληροφοριές για συναρτήσεις ή μεταβλήτες απο το Symbol Table στον Visitor.

2.Function: Διαθέτει πληροφοριές για μία συνάρτηση όπως όνομα, μεταβλητές, τύπος επιστροφής και ότι αλλό μου χρειάστηκε.

3.Variable: Διαθέτει πληροφοριές για μία μεταβλητή όπως όνομα, διαστάσεις, τύπος, θέση που θα βρίσκεσαι στο activation record.

4.Symbol_Table: Το έχω υλοποιήσει ως Stack απο κλάση Info_Table.

5.Info_Table: Αποθηκέυω όλες τις απαραίτητες πληροφορίες που χρείαζομαι για μία εμβέλεια, πχ μεταβλητες,συνάρτησεις, χώρο που θα δεσμευσω για το
activation record της, το φώλιασμα της καθώς και τις συναρτήσεις που σε αυτή την εμβέλεια δεν έχει οριστεί definition παρα μόνο header.

6.QuadRuple: Αποθήκευση των τετράδων, των προσωρινών μεταβλητών και των String.

7.QuadToAssembly: Παίρνει τις τετράδες μαζί με το Symbol Table και παράγει κώδικα.

8.Optimization: Αναλαμβάνει να κάνει την βελτιστοποίηση στις τετράδες που έχουν παραχθεί. 
	Υλοποιήθηκαν τα εξής:
		-Constant Folding
		-Copy Propagation
		-Dead code Elimination, αλλά δεν πετά πάντα όλον τον άχρηστο κώδικα

Όλες οι υπόλοιπες κλάσεις είναι βοηθητικές αυτών.

#Extra Info
Υπάρχει το αρχείο library.s στο οποίο έχω τις συναρτήσεις βιβλιοθήκης της Grace.
Για τις συναρτήσεις I/Ο της Grace σε περίπτωση που καλείται η συνάρτηση geti(),getc(),gets() και δίνουμε input απο το terminal περιμένει EOF,
δηλαδή Ctrl+D για δεχτεί την είσοδο.
Στις συναρτήσεις puti(),putc() εμφανίζεται μόνο ο αριθμός ή ο χαρακτήρας αντίστοιχα χωρίς αλλαγή γραμμής.

Σε περίπτωση που υπάρχει θέμα με τον κώδικα που παράγεται, μπορείτε να απενεργοποιήσετε την βελτιστοποίηση με το flag -n.

Στον βελτιστοποιημένο ενδιάμεσο κώδικα όπου υπάρχει τετράδα με opcode null σημαίνει οτι κράτα το label αλλά μην παράξεις κώδικα γι αυτήν.

